<html>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="./jquery.xmlrpc.min.js"></script>
    <script>
        USB_test = function(cmd, data) {
            return new Promise((resolve, reject) => {
                $.xmlrpc({
                    url: 'http://localhost:8000/RPC2',
                    methodName: cmd,
                    params: [data],
                    success: function(response, status, jqXHR) {
                        resolve(response);
                    },
                    error: function(jqXHR, status, error) {
                        reject(error);
                    }
                });
            });
        }
    </script>

    <script>
        var commands = [
            ["write", "pump ramp 0 10 30"],
            ["write", "pump ramp 1 20 30"],
            ["write", "pump ramp 2 30 30"],
            ["write", "pump ramp 3 40 30"],
            ["write", "pump ramp 4 50 30"],
            ["write", "pump ramp 5 60 30"],
            ["write", "pump ramp 5 60 30"],
            ["write", "pump start"]
        ]
        for (cmd of commands) {
            USB_test(...cmd)
            .then(result => {
                console.log(result);
            })
            .catch(error => {
                console.log("error: " + error);
            });
        }
    </script>

    <body>
    </body>

</html>
